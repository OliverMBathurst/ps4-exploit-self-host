import React from 'react';
import { BrowserRouter, Route, Routes } from 'react-router-dom';
import { Home } from './components';
import { CUSTOM_LOAD_EVENT_STRING, HEN_LOADED_EVENT_STRING, HEN_LOADING_EVENT_STRING } from './global/constants';
import { BrowserContextComponent, CacheContextComponent, DirectoryContextComponent, LoadingContextComponent, ModalContextComponent, ServiceContextComponent, ThemeContextComponent } from './global/context';
import './styles.scss';

declare global {
    interface Window {
        HEN_LOADING_EVENT: string
        HEN_LOADED_EVENT: string
        CUSTOM_LOAD_EVENT: string
        HEN: Uint8Array
        POC: () => void
    }
}

window.HEN_LOADING_EVENT = HEN_LOADING_EVENT_STRING
window.HEN_LOADED_EVENT = HEN_LOADED_EVENT_STRING
window.CUSTOM_LOAD_EVENT = CUSTOM_LOAD_EVENT_STRING

const App = () => {
    //todo: clean-up
    return (
        <ServiceContextComponent>
            <CacheContextComponent>
                <LoadingContextComponent>
                    <ModalContextComponent>
                        <BrowserContextComponent>
                            <ThemeContextComponent>
                                <DirectoryContextComponent>
                                    <BrowserRouter>
                                        <Routes>
                                            <Route path="/" element={<Home />} />
                                        </Routes>
                                    </BrowserRouter>
                                </DirectoryContextComponent>
                            </ThemeContextComponent>
                        </BrowserContextComponent>
                    </ModalContextComponent>
                </LoadingContextComponent>
            </CacheContextComponent>
        </ServiceContextComponent>)
}

export default App