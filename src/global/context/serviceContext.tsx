import React, { createContext } from 'react'
import { BinService, DatabaseService, ManifestService, PayloadCachingService } from '../services'

interface IServiceContextComponentProps {
    children: React.ReactNode
}

interface IServiceContext {
    payloadCachingService: PayloadCachingService
    manifestService: ManifestService
    binService: BinService,
    databaseService: DatabaseService
}

export const ServiceContext = createContext<IServiceContext>({
    payloadCachingService: PayloadCachingService.prototype,
    manifestService: ManifestService.prototype,
    binService: BinService.prototype,
    databaseService: DatabaseService.prototype
})

const payloadCachingService = new PayloadCachingService(),
    manifestService = new ManifestService(),
    binService = new BinService(),
    databaseService = new DatabaseService()

const ServiceContextComponent = (props: IServiceContextComponentProps) => {
    const { children } = props

    return (
        <ServiceContext.Provider value={{
            payloadCachingService: payloadCachingService,
            manifestService: manifestService,
            binService: binService,
            databaseService: databaseService
        }}>
            {children}
        </ServiceContext.Provider>)
}


export default ServiceContextComponent