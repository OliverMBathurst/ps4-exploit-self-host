import React, { createContext } from 'react'
import { BinService, ManifestService, PayloadCachingService } from '../services'

interface IServiceContextComponentProps {
    children: React.ReactNode
}

interface IServiceContext {
    payloadCachingService: PayloadCachingService
    manifestService: ManifestService
    binService: BinService
}

export const ServiceContext = createContext<IServiceContext>({
    payloadCachingService: PayloadCachingService.prototype,
    manifestService: ManifestService.prototype,
    binService: BinService.prototype
})

const payloadCachingService = new PayloadCachingService(), manifestService = new ManifestService(), binService = new BinService()

const ServiceContextComponent = (props: IServiceContextComponentProps) => {
    const { children } = props

    return (
        <ServiceContext.Provider value={{
            payloadCachingService: payloadCachingService,
            manifestService: manifestService,
            binService: binService
        }}>
            {children}
        </ServiceContext.Provider>)
}


export default ServiceContextComponent