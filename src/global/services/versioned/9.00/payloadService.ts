import { IPayload, IPayloadService } from "../../../interfaces";
import { AbstractPayloadService } from "../../abstract";

class PayloadService extends AbstractPayloadService implements IPayloadService {
    portNumber: number = 9090

    handlePayload = (
        payload: IPayload,
        data: ArrayBuffer,
        binLoaderStatusEndpoint: string = `http://127.0.0.1:${this.portNumber}/status`,
        binLoaderEndpoint: string = `http://127.0.0.1:${this.portNumber}`
    ) => {
        try {
            if (payload.isHen) {
                window.HEN = data
                window.POC()
            } else {
                this.postBINLoaderPayload(
                    binLoaderStatusEndpoint,
                    binLoaderEndpoint,
                    data)
            }
        } catch (e) {
            console.error(e)
        }
    }
}

export default PayloadService