import React, { useEffect, useState } from 'react'
import { Browser, Loader } from '../../global/components'
import { AdditionalControls, CreditsFooter, HomeHeader, ItemsContainer } from './components'
import './styles.scss'

const Home = () => {
    const [loading, setLoading] = useState<boolean>(false)

    useEffect(() => {
        const onHenLoading = () => setLoading(true)
        const onHenLoaded = () => setLoading(false)

        window.addEventListener(window.HEN_LOADING_EVENT, onHenLoading)
        window.addEventListener(window.HEN_LOADED_EVENT, onHenLoaded)

        return () => {
            window.removeEventListener(window.HEN_LOADING_EVENT, onHenLoading)
            window.removeEventListener(window.HEN_LOADED_EVENT, onHenLoaded)
        }
    }, [])

    return (
        <>
            {loading && <Loader />}
            <div className="home">
                <HomeHeader />
                <ItemsContainer>
                    <Browser />
                </ItemsContainer>
                <CreditsFooter />
                <AdditionalControls />
            </div>
        </>)
}

export default Home