import React, { useContext, useMemo, useState } from 'react'
import { Browser } from '../../global/apps'
import { AppSwitcherPane } from '../../global/components'
import { ThemeContext } from '../../global/context'
import { withLoader, withModals } from '../../global/HOC'
import { IAppDescriptor } from '../../global/interfaces'
import { AdditionalControls, AdvancedControls, CreditsFooter, HomeHeader } from './components'
import './styles.scss'

const Home = () => {
    const { theme } = useContext(ThemeContext)
    const [selectedApp, setSelectedApp] = useState(0)

    const className = useMemo(() => {
        return `home--${theme.styleName}`
    }, [theme])

    const apps: IAppDescriptor[] = useMemo(() => {
        return [
            {
                id: 0,
                title: "File Browser"
            }
        ]
    }, [])

    return (
        <div className={className}>
            <HomeHeader />
            <AppSwitcherPane
                apps={apps}
                selected={selectedApp}
                onAppSelected={setSelectedApp}
            />
            <Browser />
            <AdvancedControls />
            <CreditsFooter />
            <AdditionalControls />
        </div>)
}

export default withLoader(withModals(Home))